{"version":3,"sources":["components/Navigation.js","components/UserMenu/default-avatar.png","components/UserMenu/UserMenu.js","components/AuthNav.js","components/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/store.js","index.js","redux/phonebook/contacts-selectors.js","redux/phonebook/contacts-actions.js","redux/phonebook/contacts-operations.js","redux/phonebook/contacts-reducer.js","components/Spinner/Spinner.js","components/Container/Container.js","components/Container/Container.module.css","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js"],"names":["styles","link","display","textDecoration","padding","fontWeight","fontSize","color","textShadow","activeLink","Navigation","isLoggedIn","useSelector","authSelectors","getIsLoggedIn","style","block","to","exact","activeStyle","container","alignItems","avatar","marginRight","button","name","UserMenu","dispatch","useDispatch","getUsername","src","defaultAvatar","alt","width","Button","type","variant","onClick","authOperations","logOut","AuthNav","header","justifyContent","borderBottom","AppBar","PrivateRoute","children","redirectTo","routeProps","isLogedin","PublicRoute","restricted","shouldRedirect","PhonebookViews","lazy","HomeView","RegisterView","LoginView","App","isFetching","getFetching","useEffect","fetchCurrentUser","Container","fallback","Spinner","path","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","contacts","contactsReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","getAllConatcts","state","note","getLoading","getContactsLength","length","getFilter","createSelector","allContacts","reduce","total","contact","completed","filter","getVisibleContacts","normalizedFilter","toLowerCase","trim","includes","fetchContactsRequest","createAction","fetchContactsSuccess","fetchContactsError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","toggleCompletedRequest","toggleCompletedSuccess","toggleCompletedError","changeFilter","fetchContacts","a","axios","get","data","addContact","number","post","then","catch","error","deleteContact","contactId","delete","createReducer","_","payload","find","alert","id","map","combineReducers","className","height","module","exports","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","thunkAPI","rejectWithValue","message","logIn","operations","getState","persistedToken","user","authSlice","createSlice","initialState","email","extraReducers","fulfilled","action","rejected","pending"],"mappings":"gPAKMA,EAAS,CACbC,KAAM,CACJC,QAAS,eACTC,eAAgB,OAChBC,QAAS,GACTC,WAAY,IACZC,SAAU,GAEVC,MAAO,UACPC,WACE,oEAEJC,WAAY,CACVF,MAAO,YA8BIG,EAvBI,WACjB,IAAMC,EAAaC,YAAYC,IAAcC,eAE7C,OACE,sBAAKC,MAAOf,EAAOgB,MAAnB,UACE,cAAC,IAAD,CAASC,GAAG,IAAIC,OAAK,EAACH,MAAOf,EAAOC,KAAMkB,YAAanB,EAAOS,WAA9D,kBAICE,EACC,cAAC,IAAD,CACEM,GAAG,YACHC,OAAK,EACLH,MAAOf,EAAOC,KACdkB,YAAanB,EAAOS,WAJtB,uBAQE,SC3CK,MAA0B,2C,QCMnCT,G,MAAS,CACboB,UAAW,CACTlB,QAAS,OACTmB,WAAY,UAEdC,OAAQ,CACNC,YAAa,GAEfC,OAAQ,CACNnB,WAAY,KAEdoB,KAAM,CACJpB,WAAY,IACZkB,YAAa,GACbjB,SAAU,GACVC,MAAO,aAII,SAASmB,IACtB,IAAMC,EAAWC,cACXH,EAAOb,YAAYC,IAAcgB,aAEvC,OACE,sBAAKd,MAAOf,EAAOoB,UAAnB,UACE,qBAAKU,IAAKC,EAAeC,IAAI,GAAGC,MAAM,KAAKlB,MAAOf,EAAOsB,SACzD,uBAAMP,MAAOf,EAAOyB,KAApB,sBAAoCA,KACpC,cAACS,EAAA,EAAD,CACEnB,MAAOf,EAAOwB,OACdW,KAAK,SACLC,QAAQ,YACRC,QAAS,kBAAMV,EAASW,IAAeC,WAJzC,wBC9BN,IAAMvC,EAAS,CACbC,KAAM,CACJC,QAAS,eACTC,eAAgB,OAChBC,QAAS,GACTE,SAAU,GACVC,MAAO,UACPF,WAAY,KAGdI,WAAY,CACVF,MAAO,YAII,SAASiC,IACtB,OACE,gCACE,cAAC,IAAD,CACEvB,GAAG,YACHC,OAAK,EACLH,MAAOf,EAAOC,KACdkB,YAAanB,EAAOS,WAJtB,oBAQA,cAAC,IAAD,CACEQ,GAAG,SACHC,OAAK,EACLH,MAAOf,EAAOC,KACdkB,YAAanB,EAAOS,WAJtB,sBCvBN,IAAMT,EAAS,CACbyC,OAAQ,CACNvC,QAAS,OACTwC,eAAgB,gBAChBrB,WAAY,SACZsB,aAAc,sBAIH,SAASC,IACtB,IAAMjC,EAAaC,YAAYC,IAAcC,eAC7C,OACE,yBAAQC,MAAOf,EAAOyC,OAAtB,UACE,cAAC,EAAD,IACC9B,EAAa,cAACe,EAAD,IAAe,cAACc,EAAD,O,gDChBpB,SAASK,EAAT,GAIX,IAHFC,EAGC,EAHDA,SAGC,IAFDC,kBAEC,MAFY,IAEZ,EADEC,EACF,iBACKC,EAAYrC,YAAYC,IAAcC,eAC5C,OACE,cAAC,IAAD,2BAAWkC,GAAX,aACGC,EAAYH,EAAW,cAAC,IAAD,CAAU7B,GAAI8B,O,6CCR7B,SAASG,EAAT,GAKX,IAJFJ,EAIC,EAJDA,SAIC,IAHDK,kBAGC,aAFDJ,kBAEC,MAFY,IAEZ,EADEC,EACF,iBAEKI,EADaxC,YAAYC,IAAcC,gBACRqC,EAErC,OACE,cAAC,IAAD,2BAAWH,GAAX,aACGI,EAAiB,cAAC,IAAD,CAAUnC,GAAI8B,IAAiBD,K,oBCLjDO,EAAiBC,gBAAK,kBAC1B,uDAEIC,EAAWD,gBAAK,kBACpB,iCAEIE,EAAeF,gBAAK,kBACxB,iCAEIG,EAAYH,gBAAK,kBACrB,iCAGa,SAASI,IACtB,IAAM/B,EAAWC,cACX+B,EAAa/C,YAAYC,IAAc+C,aAQ7C,OAJAC,qBAAU,WACRlC,EAASW,IAAewB,sBACvB,CAACnC,KAGDgC,GACC,eAACI,EAAA,EAAD,WACE,cAACnB,EAAD,IAEA,cAAC,IAAD,UACE,eAAC,WAAD,CAAUoB,SAAU,cAACC,EAAA,EAAD,IAApB,UACE,cAACf,EAAD,CAAahC,OAAK,EAACgD,KAAK,IAAxB,SACE,cAACX,EAAD,MAEF,cAACL,EAAD,CACEhC,OAAK,EACLgD,KAAK,YACLf,YAAU,EACVJ,WAAW,YAJb,SAME,cAACS,EAAD,MAEF,cAACN,EAAD,CAAahC,OAAK,EAACgD,KAAK,SAASf,YAAU,EAACJ,WAAW,YAAvD,SACE,cAACU,EAAD,MAEF,cAACZ,EAAD,CAAcqB,KAAK,YAAYnB,WAAW,SAA1C,SACE,cAACM,EAAD,c,oDCvCRc,EAAU,YACXC,YAAqB,CACtBC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,SAM1DC,EAAoB,CACxBC,IAAK,OACLC,YACAC,UAAW,CAAC,UAGDC,EAAQC,YAAe,CAClCC,QAAS,CACPC,KAAMC,YAAeR,EAAmBS,KACxCC,SAAUC,KAEZrB,aACAsB,UAAUC,IAGCC,EAAYC,YAAaX,G,OC5BtCY,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUd,MAAOA,EAAjB,SACE,cAAC,IAAD,CACEe,QAAS,KAITL,UAAWA,EALb,SAOE,cAAC,IAAD,UACE,cAACjC,EAAD,YAKRuC,SAASC,eAAe,U,kWC1BpBC,EAAiB,SAAAC,GAAK,OAAIA,EAAMb,SAASc,MAGlCC,EAAa,SAAAF,GAAK,OAAIA,EAAMb,SAASS,SACrCO,EAAoB,SAAAH,GAAK,OAAIA,EAAMb,SAASc,KAAKG,QAajDC,GAX2BC,YACtC,CAACP,IACD,SAAAQ,GACE,OAAOA,EAAYC,QACjB,SAACC,EAAOC,GAAR,OAAqBA,EAAQC,UAAYF,EAAQ,EAAIA,IACrD,MAMmB,SAAAT,GAAK,OAAIA,EAAMb,SAASyB,SAGpCC,EAAqBP,YAChC,CAACP,EAAgBM,IAEjB,SAACE,EAAaK,GACZ,IAAME,EAAmBF,EAAOG,cAAcC,OAE9C,OAAOT,EAAYK,QAAO,qBAAGvF,KACtB0F,cAAcE,SAASH,S,iDC3B5BI,EAAuBC,YAAa,iCACpCC,EAAuBD,YAAa,iCACpCE,EAAqBF,YAAa,+BAElCG,EAAoBH,YAAa,8BACjCI,EAAoBJ,YAAa,8BACjCK,EAAkBL,YAAa,4BAE/BM,EAAuBN,YAAa,iCACpCO,EAAuBP,YAAa,iCACpCQ,EAAqBR,YAAa,+BAElCS,EAAyBT,YAAa,mCACtCU,EAAyBV,YAAa,mCACtCW,EAAuBX,YAAa,iCAEpCY,EAAeZ,YAAa,0BCF5Ba,EAAgB,yDAAM,WAAMzG,GAAN,iBAAA0G,EAAA,6DAC1B1G,EAAS2F,KADiB,kBAIDgB,IAAMC,IAAI,aAJT,gBAIhBC,EAJgB,EAIhBA,KACR7G,EAAS6F,EAAqBgB,IALN,gDAOxB7G,EAAS8F,EAAmB,EAAD,KAPH,yDAAN,uDAgBhBgB,EAAa,SAAChH,EAAMiH,GAAP,OAAkB,SAAA/G,GACnC,IAAM0E,EAAO,CACX5E,OACAiH,SACA3B,WAAW,GAGbpF,EAAS+F,KAETY,IACGK,KAAK,YAAatC,GAClBuC,MAAK,gBAAGJ,EAAH,EAAGA,KAAH,OAAc7G,EAASgG,EAAkBa,OAC9CK,OAAM,SAAAC,GAAK,OAAInH,EAASiG,EAAgBkB,SAGvCC,EAAgB,SAAAC,GAAS,OAAI,SAAArH,GACjCA,EAASkG,KAETS,IACGW,OADH,oBACuBD,IACpBJ,MAAK,kBAAMjH,EAASmG,EAAqBkB,OACzCH,OAAM,SAAAC,GAAK,OAAInH,EAASoG,EAAmBe,S,sBCrB1CzC,EAAO6C,YAAc,IAAD,mBACvB1B,GAAuB,SAAC2B,EAAD,YAAMC,WADN,cAEvBzB,GAhBuB,SAACvB,EAAD,GAAyB,IAAfgD,EAAc,EAAdA,QAClC,OAAIhD,EAAMiD,MAAK,qBAAG5H,OAAoB2H,EAAQ3H,SAC5C6H,MAAM,GAAD,OAAIF,EAAQ3H,KAAZ,6BACE,YAAI2E,IAEP,GAAN,mBAAWA,GAAX,CAAkBgD,OASM,cAGvBtB,GAT0B,SAAC1B,EAAD,OAAUgD,EAAV,EAAUA,QAAV,OAC3BhD,EAAMY,QAAO,qBAAGuC,KAAgBH,QAKR,cAIvBnB,GAP4B,SAAC7B,EAAD,OAAUgD,EAAV,EAAUA,QAAV,OAC7BhD,EAAMoD,KAAI,SAAA1C,GAAO,OAAKA,EAAQyC,KAAOH,EAAQG,GAAKH,EAAUtC,QAEpC,IAOpBE,EAASkC,YAAc,GAAD,eACzBf,GAAe,SAACgB,EAAD,YAAMC,YAGlBpD,EAAUkD,aAAc,GAAD,mBAC1B5B,GAAuB,kBAAM,KADH,cAE1BE,GAAuB,kBAAM,KAFH,cAG1BC,GAAqB,kBAAM,KAHD,cAI1BC,GAAoB,kBAAM,KAJA,cAK1BC,GAAoB,kBAAM,KALA,cAM1BC,GAAkB,kBAAM,KANE,cAO1BC,GAAuB,kBAAM,KAPH,cAQ1BC,GAAuB,kBAAM,KARH,cAS1BC,GAAqB,kBAAM,KATD,cAU1BC,GAAyB,kBAAM,KAVL,cAW1BC,GAAyB,kBAAM,KAXL,cAY1BC,GAAuB,kBAAM,KAZH,IAeduB,cAAgB,CAC7BpD,OACAW,SACAhB,a,gCC7DF,uEAGe,SAAS/B,IACtB,OACE,qBAAKyF,UAAU,UAAf,SACE,cAAC,IAAD,CAAQvH,KAAK,QAAQ5B,MAAM,UAAUoJ,OAAQ,GAAI1H,MAAO,S,8FCJ/C,SAAS8B,EAAT,GAAkC,IAAbjB,EAAY,EAAZA,SAClC,OAAO,qBAAK4G,UAAW1J,IAAOoB,UAAvB,SAAmC0B,M,mBCF5C8G,EAAOC,QAAU,CAAC,UAAY,+B,+MCE9BvB,IAAMwB,SAASC,QAAU,wCAEzB,I,EAAMC,EAAQ,SACRA,GACF1B,IAAMwB,SAASG,QAAQC,OAAOC,cAA9B,iBAAwDH,IAFtDA,EAAQ,WAKV1B,IAAMwB,SAASG,QAAQC,OAAOC,cAAgB,IAU5CC,EAAWC,YACf,gBAD+B,uCAE/B,WAAOC,EAAaC,GAApB,iBAAAlC,EAAA,+EAG2BC,IAAMK,KAAK,gBAAiB2B,GAHvD,uBAGY9B,EAHZ,EAGYA,KACRwB,EAAUxB,EAAKwB,OAJnB,kBAKWxB,GALX,uCAOIc,MAAM,iCAAD,cAPT,kBAQWiB,EAASC,gBAAgB,KAAMC,UAR1C,yDAF+B,yDAoB3BC,EAAQL,YAAiB,aAAD,uCAAe,WAAOC,EAAaC,GAApB,iBAAAlC,EAAA,+EAElBC,IAAMK,KAAK,eAAgB2B,GAFT,uBAEjC9B,EAFiC,EAEjCA,KACRwB,EAAUxB,EAAKwB,OAH0B,kBAIlCxB,GAJkC,uCAMzCc,MAAM,iCAAD,cANoC,kBAOlCiB,EAASC,gBAAgB,KAAMC,UAPG,yDAAf,yDAgEfE,EAPI,CACjBP,WACA7H,OA3Ca8H,YAAiB,cAAD,uCAAgB,WAAOlB,EAAGoB,GAAV,SAAAlC,EAAA,+EAErCC,IAAMK,KAAK,iBAF0B,OAG3CqB,IAH2C,uDAK3CV,MAAM,iCAAD,cALsC,kBAMpCiB,EAASC,gBAAgB,KAAMC,UANK,yDAAhB,yDA4C7BC,QACA5G,iBA1BuBuG,YACvB,eADuC,uCAEvC,WAAOlB,EAAGoB,GAAV,qBAAAlC,EAAA,yDACQjC,EAAQmE,EAASK,WACjBC,EAAiBzE,EAAMhB,KAAK4E,MAFpC,yCAMWO,EAASC,mBANpB,cAQER,EAAUa,GARZ,kBAU2BvC,IAAMC,IAAI,kBAVrC,uBAUYC,EAVZ,EAUYA,KAVZ,kBAYWA,GAZX,yCAcIc,MAAM,iCAAD,cAdT,kBAeWiB,EAASC,gBAAgB,KAAMC,UAf1C,0DAFuC,0DChE1B5J,EALO,CACpBC,cAPoB,SAAAsF,GAAK,OAAIA,EAAMhB,KAAKzE,YAQxCkB,YANkB,SAAAuE,GAAK,OAAIA,EAAMhB,KAAK0F,KAAKrJ,MAO3CmC,YALkB,SAAAwC,GAAK,OAAIA,EAAMhB,KAAKzB,a,OCmDzBoH,EA7CGC,YAAY,CAC5BvJ,KAAM,OACNwJ,aATmB,CACnBH,KAAM,CAAErJ,KAAM,KAAMyJ,MAAO,MAC3BlB,MAAO,KACPrJ,YAAY,EACZgD,YAAY,GAMZwH,eAAa,mBACV7I,EAAe8H,SAASgB,WADd,SACyBhF,EAAOiF,GACzCjF,EAAM0E,KAAOO,EAAOjC,QAAQ0B,KAC5B1E,EAAM4D,MAAQqB,EAAOjC,QAAQY,MAC7B5D,EAAMzF,YAAa,KAJV,cAMV2B,EAAe8H,SAASkB,UAAW,SAACnC,EAAGkC,GAAJ,OAAeA,EAAOjC,WAN/C,cAOV9G,EAAe8H,SAASmB,SAAU,kBAAM,QAP9B,cASVjJ,EAAeoI,MAAMU,WATX,SASsBhF,EAAOiF,GACtCjF,EAAM0E,KAAOO,EAAOjC,QAAQ0B,KAC5B1E,EAAM4D,MAAQqB,EAAOjC,QAAQY,MAC7B5D,EAAMzF,YAAa,KAZV,cAcV2B,EAAeoI,MAAMY,UAAW,SAACnC,EAAGkC,GAAJ,OAAeA,EAAOjC,WAd5C,cAeV9G,EAAeoI,MAAMa,SAAU,kBAAM,QAf3B,cAiBVjJ,EAAeC,OAAO6I,WAjBZ,SAiBuBhF,EAAO+C,GACvC/C,EAAM0E,KAAO,CAAErJ,KAAM,KAAMyJ,MAAO,MAClC9E,EAAM4D,MAAQ,KACd5D,EAAMzF,YAAa,KApBV,cAsBV2B,EAAeC,OAAO+I,UAAW,SAACnC,EAAGkC,GAAJ,OAAeA,EAAOjC,WAtB7C,cAuBV9G,EAAeC,OAAOgJ,SAAU,kBAAM,QAvB5B,cAyBVjJ,EAAewB,iBAAiByH,SAzBtB,SAyB+BnF,EAAOiF,GAC/CjF,EAAM0E,KAAOO,EAAOjC,QACpBhD,EAAMzC,YAAa,KA3BV,cA6BVrB,EAAewB,iBAAiBsH,WA7BtB,SA6BiChF,EAAOiF,GAEjDjF,EAAM0E,KAAOO,EAAOjC,QACpBhD,EAAMzF,YAAa,EACnByF,EAAMzC,YAAa,KAjCV,cAmCVrB,EAAewB,iBAAiBwH,UAnCtB,SAmCgClF,EAAOiF,GAChDjF,EAAM0E,KAAOO,EAAOjC,QACpBhD,EAAMzC,YAAa,KArCV,KA0Cf,U","file":"static/js/main.0536d34a.chunk.js","sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { authSelectors } from '../redux/auth';\n\nconst styles = {\n  link: {\n    display: 'inline-block',\n    textDecoration: 'none',\n    padding: 18,\n    fontWeight: 700,\n    fontSize: 24,\n    // color: '#2A363B',\n    color: '#2b3c8a',\n    textShadow:\n      '0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22)',\n  },\n  activeLink: {\n    color: '#E84A5F',\n  },\n  // block: {\n  //   height: 150,\n  // },\n};\n\nconst Navigation = () => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n\n  return (\n    <nav style={styles.block}>\n      <NavLink to=\"/\" exact style={styles.link} activeStyle={styles.activeLink}>\n        Main\n      </NavLink>\n\n      {isLoggedIn ? (\n        <NavLink\n          to=\"/contacts\"\n          exact\n          style={styles.link}\n          activeStyle={styles.activeLink}\n        >\n          Phonebook\n        </NavLink>\n      ) : null}\n    </nav>\n  );\n};\n\nexport default Navigation;\n","export default __webpack_public_path__ + \"static/media/default-avatar.dca40665.png\";","import { useDispatch, useSelector } from 'react-redux';\nimport { authSelectors, authOperations } from '../../redux/auth';\nimport defaultAvatar from './default-avatar.png';\nimport Button from 'react-bootstrap/Button';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  avatar: {\n    marginRight: 7,\n  },\n  button: {\n    fontWeight: 700,\n  },\n  name: {\n    fontWeight: 700,\n    marginRight: 12,\n    fontSize: 18,\n    color: '#717579',\n  },\n};\n\nexport default function UserMenu() {\n  const dispatch = useDispatch();\n  const name = useSelector(authSelectors.getUsername);\n\n  return (\n    <div style={styles.container}>\n      <img src={defaultAvatar} alt=\"\" width=\"40\" style={styles.avatar} />\n      <span style={styles.name}>Welcome, {name}</span>\n      <Button\n        style={styles.button}\n        type=\"button\"\n        variant=\"secondary\"\n        onClick={() => dispatch(authOperations.logOut())}\n      >\n        Log out\n      </Button>\n      {/* <button\n        type=\"button\"\n        onClick={() => dispatch(authOperations.logOut())}\n      ></button> */}\n    </div>\n  );\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst styles = {\n  link: {\n    display: 'inline-block',\n    textDecoration: 'none',\n    padding: 12,\n    fontSize: 18,\n    color: '#717579',\n    fontWeight: 700,\n    // color: '#2A363B',\n  },\n  activeLink: {\n    color: '#E84A5F',\n  },\n};\n\nexport default function AuthNav() {\n  return (\n    <div>\n      <NavLink\n        to=\"/register\"\n        exact\n        style={styles.link}\n        activeStyle={styles.activeLink}\n      >\n        Signup\n      </NavLink>\n      <NavLink\n        to=\"/login\"\n        exact\n        style={styles.link}\n        activeStyle={styles.activeLink}\n      >\n        Login\n      </NavLink>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport Navigation from './Navigation';\nimport UserMenu from './UserMenu';\nimport AuthNav from './AuthNav';\nimport { authSelectors } from '../redux/auth';\n\nconst styles = {\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderBottom: '1px solid #2A363B',\n  },\n};\n\nexport default function AppBar() {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <header style={styles.header}>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </header>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport { authSelectors } from '../redux/auth';\n\nexport default function PrivateRoute({\n  children,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLogedin = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <Route {...routeProps}>\n      {isLogedin ? children : <Redirect to={redirectTo} />}\n    </Route>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport { authSelectors } from '../redux/auth';\n\nexport default function PublicRoute({\n  children,\n  restricted = false,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  const shouldRedirect = isLoggedIn && restricted;\n  //   console.log('shouldRedirect: ', shouldRedirect);\n  return (\n    <Route {...routeProps}>\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\n    </Route>\n  );\n}\n","import { useEffect, Suspense, lazy } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Switch } from 'react-router-dom';\nimport AppBar from './components/AppBar';\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\nimport Spinner from './components/Spinner/Spinner';\nimport Container from './components/Container';\nimport { authOperations, authSelectors } from './redux/auth';\n\nconst PhonebookViews = lazy(() =>\n  import('./views/PhonebookViews' /* webpackChunkName: \"phonebook_page\" */),\n);\nconst HomeView = lazy(() =>\n  import('./views/HomeView' /* webpackChunkName: \"home_page\" */),\n);\nconst RegisterView = lazy(() =>\n  import('./views/RegisterView' /* webpackChunkName: \"register_page\" */),\n);\nconst LoginView = lazy(() =>\n  import('./views/LoginView' /* webpackChunkName: \"login_page\" */),\n);\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isFetching = useSelector(authSelectors.getFetching);\n\n  // console.log(isFetching);\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    !isFetching && (\n      <Container>\n        <AppBar />\n\n        <Switch>\n          <Suspense fallback={<Spinner />}>\n            <PublicRoute exact path=\"/\">\n              <HomeView />\n            </PublicRoute>\n            <PublicRoute\n              exact\n              path=\"/register\"\n              restricted\n              redirectTo=\"/contacts\"\n            >\n              <RegisterView />\n            </PublicRoute>\n            <PublicRoute exact path=\"/login\" restricted redirectTo=\"/contacts\">\n              <LoginView />\n            </PublicRoute>\n            <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\n              <PhonebookViews />\n            </PrivateRoute>\n          </Suspense>\n        </Switch>\n      </Container>\n    )\n  );\n}\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\n// import logger from 'redux-logger';\nimport { contactsReducer } from './phonebook';\nimport { authReducer } from './auth';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n  // logger,\n];\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, authReducer),\n    contacts: contactsReducer,\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport './index.css';\nimport App from './App';\nimport { store, persistor } from './redux/store';\nimport 'modern-normalize/modern-normalize.css';\n// import Loader from 'react-loader-spinner';\n// import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate\n        loading={null}\n        // loading={\n        //   <Loader type=\"Audio\" color=\"#ffed4f\" height={100} width={100} />\n        // }\n        persistor={persistor}\n      >\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","import { createSelector } from '@reduxjs/toolkit';\n\nconst getAllConatcts = state => state.contacts.note;\n\n// ===== used in App.js =====\nexport const getLoading = state => state.contacts.loading;\nexport const getContactsLength = state => state.contacts.note.length;\n\nexport const getCompleteContactsCount = createSelector(\n  [getAllConatcts],\n  allContacts => {\n    return allContacts.reduce(\n      (total, contact) => (contact.completed ? total + 1 : total),\n      0,\n    );\n  },\n);\n\n// ===== used in Filter.js =====\nexport const getFilter = state => state.contacts.filter;\n\n// ===== used in ContactList.js =====\nexport const getVisibleContacts = createSelector(\n  [getAllConatcts, getFilter],\n\n  (allContacts, filter) => {\n    const normalizedFilter = filter.toLowerCase().trim();\n\n    return allContacts.filter(({ name }) =>\n      name.toLowerCase().includes(normalizedFilter),\n    );\n  },\n);\n\n// ===== Без мемоизации =====\n// export const getVisibleContacts = state => {\n//   const allContacts = getAllConatcts(state);\n//   const filter = getFilter(state);\n//   const normalizedFilter = filter.toLowerCase().trim();\n\n//   return allContacts.filter(({ name }) =>\n//     name.toLowerCase().includes(normalizedFilter),\n//   );\n// };\n","import { createAction } from '@reduxjs/toolkit';\n\nconst fetchContactsRequest = createAction('contacts/fetchContactsRequest');\nconst fetchContactsSuccess = createAction('contacts/fetchContactsSuccess');\nconst fetchContactsError = createAction('contacts/fetchContactsError');\n\nconst addContactRequest = createAction('contacts/addContactRequest');\nconst addContactSuccess = createAction('contacts/addContactSuccess');\nconst addContactError = createAction('contacts/addContactError');\n\nconst deleteContactRequest = createAction('contacts/deleteContactRequest');\nconst deleteContactSuccess = createAction('contacts/deleteContactSuccess');\nconst deleteContactError = createAction('contacts/deleteContactError');\n\nconst toggleCompletedRequest = createAction('contacts/toggleCompletedRequest');\nconst toggleCompletedSuccess = createAction('contacts/toggleCompletedSuccess');\nconst toggleCompletedError = createAction('contacts/toggleCompletedError');\n\nconst changeFilter = createAction('phonebook/changeFilter');\n\nexport {\n  addContactRequest,\n  addContactSuccess,\n  addContactError,\n  deleteContactRequest,\n  deleteContactSuccess,\n  deleteContactError,\n  changeFilter,\n  toggleCompletedRequest,\n  toggleCompletedSuccess,\n  toggleCompletedError,\n  fetchContactsRequest,\n  fetchContactsSuccess,\n  fetchContactsError,\n};\n\n// ===== Без json-server =====\n\n// const addContact = createAction('phonebook/add', (name, number) => ({\n//   payload: {\n//     id: shortid.generate(),\n//     name,\n//     number,\n//     completed: false,\n//   },\n// }));\n\n// const deleteContact = createAction('phonebook/delete');\n// const toggleCompleted = createAction('phonebook/toggleCompleted');\n\n// ===== БЕЗ БИБЛИОТЕКИ TOOLKIT =====\n\n// const addContact = (name, number) => ({\n//   type: ADD,\n//   payload: {\n//     id: shortid.generate(),\n//     name,\n//     number,\n//     completed: false,\n//   },\n// });\n\n// const deleteContact = contactId => ({\n//   type: DELETE,\n//   payload: contactId,\n// });\n\n// const changeFilter = value => ({\n//   type: CHANGE_FILTER,\n//   payload: value,\n// });\n\n// const toggleCompleted = contactId => ({\n//   type: TOGGLE_COMPLETED,\n//   payload: contactId,\n// });\n","import axios from 'axios';\nimport {\n  addContactRequest,\n  addContactSuccess,\n  addContactError,\n  deleteContactRequest,\n  deleteContactSuccess,\n  deleteContactError,\n  toggleCompletedRequest,\n  toggleCompletedSuccess,\n  toggleCompletedError,\n  fetchContactsRequest,\n  fetchContactsSuccess,\n  fetchContactsError,\n} from './contacts-actions';\n\nconst fetchContacts = () => async dispatch => {\n  dispatch(fetchContactsRequest());\n\n  try {\n    const { data } = await axios.get('/contacts');\n    dispatch(fetchContactsSuccess(data));\n  } catch (error) {\n    dispatch(fetchContactsError(error));\n  }\n\n  // axios\n  //   .get('/mainState')\n  //   .then(({ data }) => dispatch(fetchContactsSuccess(data)))\n  //   .catch(error => dispatch(fetchContactsError(error)));\n};\n\nconst addContact = (name, number) => dispatch => {\n  const note = {\n    name,\n    number,\n    completed: false,\n  };\n\n  dispatch(addContactRequest());\n\n  axios\n    .post('/contacts', note)\n    .then(({ data }) => dispatch(addContactSuccess(data)))\n    .catch(error => dispatch(addContactError(error)));\n};\n\nconst deleteContact = contactId => dispatch => {\n  dispatch(deleteContactRequest());\n\n  axios\n    .delete(`/contacts/${contactId}`)\n    .then(() => dispatch(deleteContactSuccess(contactId)))\n    .catch(error => dispatch(deleteContactError(error)));\n};\n\nconst toggleCompleted =\n  ({ id, completed }) =>\n  dispatch => {\n    const update = { completed };\n\n    dispatch(toggleCompletedRequest());\n\n    axios\n      .patch(`/contacts/${id}`, update)\n      .then(({ data }) => dispatch(toggleCompletedSuccess(data)))\n      .catch(error => dispatch(toggleCompletedError(error)));\n  };\n\nexport { addContact, deleteContact, toggleCompleted, fetchContacts };\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport {\n  addContactRequest,\n  addContactSuccess,\n  addContactError,\n  deleteContactRequest,\n  deleteContactSuccess,\n  deleteContactError,\n  changeFilter,\n  toggleCompletedRequest,\n  toggleCompletedSuccess,\n  toggleCompletedError,\n  fetchContactsRequest,\n  fetchContactsSuccess,\n  fetchContactsError,\n} from './contacts-actions';\n\nconst addContactReducer = (state, { payload }) => {\n  if (state.find(({ name }) => name === payload.name)) {\n    alert(`${payload.name} is already in contacts.`);\n    return [...state];\n  }\n  return [...state, payload];\n};\n\nconst deleteContactReducer = (state, { payload }) =>\n  state.filter(({ id }) => id !== payload);\n\nconst toggleCompletedReducer = (state, { payload }) =>\n  state.map(contact => (contact.id === payload.id ? payload : contact));\n\nconst note = createReducer([], {\n  [fetchContactsSuccess]: (_, { payload }) => payload,\n  [addContactSuccess]: addContactReducer,\n  [deleteContactSuccess]: deleteContactReducer,\n  [toggleCompletedSuccess]: toggleCompletedReducer,\n});\n\nconst filter = createReducer('', {\n  [changeFilter]: (_, { payload }) => payload,\n});\n\nconst loading = createReducer(false, {\n  [fetchContactsRequest]: () => true,\n  [fetchContactsSuccess]: () => false,\n  [fetchContactsError]: () => false,\n  [addContactRequest]: () => true,\n  [addContactSuccess]: () => false,\n  [addContactError]: () => false,\n  [deleteContactRequest]: () => true,\n  [deleteContactSuccess]: () => false,\n  [deleteContactError]: () => false,\n  [toggleCompletedRequest]: () => true,\n  [toggleCompletedSuccess]: () => false,\n  [toggleCompletedError]: () => false,\n});\n\nexport default combineReducers({\n  note,\n  filter,\n  loading,\n});\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default function Spinner() {\n  return (\n    <div className=\"spinner\">\n      <Loader type=\"Audio\" color=\"#ffed4f\" height={60} width={60} />\n    </div>\n  );\n}\n","import styles from './Container.module.css';\n\nexport default function Container({ children }) {\n  return <div className={styles.container}>{children}</div>;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3i19u\"};","import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\n/*\n * POST @ /users/signup\n * body: { name, email, password }\n * После успешной регистрации добавляем токен в HTTP-заголовок\n */\n\nconst register = createAsyncThunk(\n  'auth/register',\n  async (credentials, thunkAPI) => {\n    // console.log('credentials: ', credentials);\n    try {\n      const { data } = await axios.post('/users/signup', credentials);\n      token.set(data.token);\n      return data;\n    } catch (error) {\n      alert(`Oops... Something went wrong: ${error}`);\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  },\n);\n\n/*\n * POST @ /users/login\n * body: { email, password }\n * После успешного логина добавляем токен в HTTP-заголовок\n */\nconst logIn = createAsyncThunk('auth/login', async (credentials, thunkAPI) => {\n  try {\n    const { data } = await axios.post('/users/login', credentials);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    alert(`Oops... Something went wrong: ${error}`);\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\n\n/*\n * POST @ /users/logout\n * headers: Authorization: Bearer token\n * После успешного логаута, удаляем токен из HTTP-заголовка\n */\nconst logOut = createAsyncThunk('auth/logout', async (_, thunkAPI) => {\n  try {\n    await axios.post('/users/logout');\n    token.unset();\n  } catch (error) {\n    alert(`Oops... Something went wrong: ${error}`);\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\n\n/*\n * GET @ /users/current\n * headers:\n *    Authorization: Bearer token\n *\n * 1. Забираем токен из стейта через getState()\n * 2. Если токена нет, выходим не выполняя никаких операций\n * 3. Если токен есть, добавляет его в HTTP-заголовок и выполянем операцию\n */\nconst fetchCurrentUser = createAsyncThunk(\n  'auth/refresh',\n  async (_, thunkAPI) => {\n    const state = thunkAPI.getState();\n    const persistedToken = state.auth.token;\n    // console.log(token);\n\n    if (!persistedToken) {\n      return thunkAPI.rejectWithValue();\n    }\n    token.set(persistedToken);\n    try {\n      const { data } = await axios.get('/users/current');\n      // console.log(data);\n      return data;\n    } catch (error) {\n      alert(`Oops... Something went wrong: ${error}`);\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  },\n);\n\nconst operations = {\n  register,\n  logOut,\n  logIn,\n  fetchCurrentUser,\n};\n\nexport default operations;\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\n\nconst getUsername = state => state.auth.user.name;\n\nconst getFetching = state => state.auth.isFetching;\n\nconst authSelectors = {\n  getIsLoggedIn,\n  getUsername,\n  getFetching,\n};\nexport default authSelectors;\n","import { createSlice } from '@reduxjs/toolkit';\nimport authOperations from './auth-operations';\n\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n  isFetching: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [authOperations.register.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.register.rejected]: (_, action) => action.payload,\n    [authOperations.register.pending]: () => null,\n\n    [authOperations.logIn.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logIn.rejected]: (_, action) => action.payload,\n    [authOperations.logIn.pending]: () => null,\n\n    [authOperations.logOut.fulfilled](state, _) {\n      state.user = { name: null, email: null };\n      state.token = null;\n      state.isLoggedIn = false;\n    },\n    [authOperations.logOut.rejected]: (_, action) => action.payload,\n    [authOperations.logOut.pending]: () => null,\n\n    [authOperations.fetchCurrentUser.pending](state, action) {\n      state.user = action.payload;\n      state.isFetching = true;\n    },\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\n      // console.log(action);\n      state.user = action.payload;\n      state.isLoggedIn = true;\n      state.isFetching = false;\n    },\n    [authOperations.fetchCurrentUser.rejected](state, action) {\n      state.user = action.payload;\n      state.isFetching = false;\n    },\n  },\n});\n\nexport default authSlice.reducer;\n"],"sourceRoot":""}