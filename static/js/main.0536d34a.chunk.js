(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{106:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(26),o=n.n(a),i=n(18),u=n(7),s=n(47),l=(n(60),n(6)),b=n(8),d=n(1),j={link:{display:"inline-block",textDecoration:"none",padding:18,fontWeight:700,fontSize:24,color:"#2b3c8a",textShadow:"0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22)"},activeLink:{color:"#E84A5F"}},f=function(){var t=Object(u.c)(b.c.getIsLoggedIn);return Object(d.jsxs)("nav",{style:j.block,children:[Object(d.jsx)(i.b,{to:"/",exact:!0,style:j.link,activeStyle:j.activeLink,children:"Main"}),t?Object(d.jsx)(i.b,{to:"/contacts",exact:!0,style:j.link,activeStyle:j.activeLink,children:"Phonebook"}):null]})},O=n.p+"static/media/default-avatar.dca40665.png",h=n(35),g=(n(52),{container:{display:"flex",alignItems:"center"},avatar:{marginRight:7},button:{fontWeight:700},name:{fontWeight:700,marginRight:12,fontSize:18,color:"#717579"}});function p(){var t=Object(u.b)(),e=Object(u.c)(b.c.getUsername);return Object(d.jsxs)("div",{style:g.container,children:[Object(d.jsx)("img",{src:O,alt:"",width:"40",style:g.avatar}),Object(d.jsxs)("span",{style:g.name,children:["Welcome, ",e]}),Object(d.jsx)(h.a,{style:g.button,type:"button",variant:"secondary",onClick:function(){return t(b.a.logOut())},children:"Log out"})]})}var v={link:{display:"inline-block",textDecoration:"none",padding:12,fontSize:18,color:"#717579",fontWeight:700},activeLink:{color:"#E84A5F"}};function x(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(i.b,{to:"/register",exact:!0,style:v.link,activeStyle:v.activeLink,children:"Signup"}),Object(d.jsx)(i.b,{to:"/login",exact:!0,style:v.link,activeStyle:v.activeLink,children:"Login"})]})}var m={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function y(){var t=Object(u.c)(b.c.getIsLoggedIn);return Object(d.jsxs)("header",{style:m.header,children:[Object(d.jsx)(f,{}),t?Object(d.jsx)(p,{}):Object(d.jsx)(x,{})]})}var k=n(10),w=n(21),C=["children","redirectTo"];function I(t){var e=t.children,n=t.redirectTo,c=void 0===n?"/":n,r=Object(w.a)(t,C),a=Object(u.c)(b.c.getIsLoggedIn);return Object(d.jsx)(l.b,Object(k.a)(Object(k.a)({},r),{},{children:a?e:Object(d.jsx)(l.a,{to:c})}))}var L=["children","restricted","redirectTo"];function S(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=t.redirectTo,a=void 0===r?"/":r,o=Object(w.a)(t,L),i=Object(u.c)(b.c.getIsLoggedIn)&&c;return Object(d.jsx)(l.b,Object(k.a)(Object(k.a)({},o),{},{children:i?Object(d.jsx)(l.a,{to:a}):e}))}var z=n(45),F=n(46),W=Object(c.lazy)((function(){return Promise.all([n.e(7),n.e(3)]).then(n.bind(null,121))})),E=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,118))})),R=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,119))})),T=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,120))}));function U(){var t=Object(u.b)(),e=Object(u.c)(b.c.getFetching);return Object(c.useEffect)((function(){t(b.a.fetchCurrentUser())}),[t]),!e&&Object(d.jsxs)(F.a,{children:[Object(d.jsx)(y,{}),Object(d.jsx)(l.d,{children:Object(d.jsxs)(c.Suspense,{fallback:Object(d.jsx)(z.a,{}),children:[Object(d.jsx)(S,{exact:!0,path:"/",children:Object(d.jsx)(E,{})}),Object(d.jsx)(S,{exact:!0,path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(d.jsx)(R,{})}),Object(d.jsx)(S,{exact:!0,path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(d.jsx)(T,{})}),Object(d.jsx)(I,{path:"/contacts",redirectTo:"/login",children:Object(d.jsx)(W,{})})]})})]})}var A=n(24),V=n(3),q=n(19),B=n(51),_=n.n(B),D=n(34),J=Object(A.a)(Object(V.f)({serializableCheck:{ignoredActions:[q.a,q.f,q.b,q.c,q.d,q.e]}})),M={key:"auth",storage:_.a,whitelist:["token"]},N=Object(V.a)({reducer:{auth:Object(q.g)(M,b.b),contacts:D.c},middleware:J,devTools:!1}),P=Object(q.h)(N);n(105);o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(u.a,{store:N,children:Object(d.jsx)(s.a,{loading:null,persistor:P,children:Object(d.jsx)(i.a,{children:Object(d.jsx)(U,{})})})})}),document.getElementById("root"))},34:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return s})),n.d(e,"i",(function(){return l})),n.d(e,"a",(function(){return W})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return F})),n.d(e,"b",(function(){return z})),n.d(e,"c",(function(){return B}));var c,r,a=n(28),o=function(t){return t.contacts.note},i=function(t){return t.contacts.loading},u=function(t){return t.contacts.note.length},s=(Object(a.a)([o],(function(t){return t.reduce((function(t,e){return e.completed?t+1:t}),0)})),function(t){return t.contacts.filter}),l=Object(a.a)([o,s],(function(t,e){var n=e.toLowerCase().trim();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))})),b=n(17),d=n.n(b),j=n(20),f=n(16),O=n.n(f),h=n(3),g=Object(h.b)("contacts/fetchContactsRequest"),p=Object(h.b)("contacts/fetchContactsSuccess"),v=Object(h.b)("contacts/fetchContactsError"),x=Object(h.b)("contacts/addContactRequest"),m=Object(h.b)("contacts/addContactSuccess"),y=Object(h.b)("contacts/addContactError"),k=Object(h.b)("contacts/deleteContactRequest"),w=Object(h.b)("contacts/deleteContactSuccess"),C=Object(h.b)("contacts/deleteContactError"),I=Object(h.b)("contacts/toggleCompletedRequest"),L=Object(h.b)("contacts/toggleCompletedSuccess"),S=Object(h.b)("contacts/toggleCompletedError"),z=Object(h.b)("phonebook/changeFilter"),F=function(){return function(){var t=Object(j.a)(d.a.mark((function t(e){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(g()),t.prev=1,t.next=4,O.a.get("/contacts");case 4:n=t.sent,c=n.data,e(p(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(v(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},W=function(t,e){return function(n){var c={name:t,number:e,completed:!1};n(x()),O.a.post("/contacts",c).then((function(t){var e=t.data;return n(m(e))})).catch((function(t){return n(y(t))}))}},E=function(t){return function(e){e(k()),O.a.delete("/contacts/".concat(t)).then((function(){return e(w(t))})).catch((function(t){return e(C(t))}))}},R=n(2),T=n(24),U=n(9),A=Object(h.d)([],(c={},Object(R.a)(c,p,(function(t,e){return e.payload})),Object(R.a)(c,m,(function(t,e){var n=e.payload;return t.find((function(t){return t.name===n.name}))?(alert("".concat(n.name," is already in contacts.")),Object(T.a)(t)):[].concat(Object(T.a)(t),[n])})),Object(R.a)(c,w,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(R.a)(c,L,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),c)),V=Object(h.d)("",Object(R.a)({},z,(function(t,e){return e.payload}))),q=Object(h.d)(!1,(r={},Object(R.a)(r,g,(function(){return!0})),Object(R.a)(r,p,(function(){return!1})),Object(R.a)(r,v,(function(){return!1})),Object(R.a)(r,x,(function(){return!0})),Object(R.a)(r,m,(function(){return!1})),Object(R.a)(r,y,(function(){return!1})),Object(R.a)(r,k,(function(){return!0})),Object(R.a)(r,w,(function(){return!1})),Object(R.a)(r,C,(function(){return!1})),Object(R.a)(r,I,(function(){return!0})),Object(R.a)(r,L,(function(){return!1})),Object(R.a)(r,S,(function(){return!1})),r)),B=Object(U.b)({note:A,filter:V,loading:q})},45:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(49),r=n.n(c),a=(n(102),n(1));function o(){return Object(a.jsx)("div",{className:"spinner",children:Object(a.jsx)(r.a,{type:"Audio",color:"#ffed4f",height:60,width:60})})}},46:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(50),r=n.n(c),a=n(1);function o(t){var e=t.children;return Object(a.jsx)("div",{className:r.a.container,children:e})}},50:function(t,e,n){t.exports={container:"Container_container__3i19u"}},60:function(t,e,n){},8:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return g}));var c=n(17),r=n.n(c),a=n(20),o=n(16),i=n.n(o),u=n(3);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var s,l=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){i.a.defaults.headers.common.Authorization=""},d=Object(u.c)("auth/register",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/signup",e);case 3:return c=t.sent,a=c.data,l(a.token),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),alert("Oops... Something went wrong: ".concat(t.t0)),t.abrupt("return",n.rejectWithValue(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(u.c)("auth/login",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/login",e);case 3:return c=t.sent,a=c.data,l(a.token),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),alert("Oops... Something went wrong: ".concat(t.t0)),t.abrupt("return",n.rejectWithValue(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()),f={register:d,logOut:Object(u.c)("auth/logout",function(){var t=Object(a.a)(r.a.mark((function t(e,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/logout");case 3:b(),t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),alert("Oops... Something went wrong: ".concat(t.t0)),t.abrupt("return",n.rejectWithValue(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:j,fetchCurrentUser:Object(u.c)("auth/refresh",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,o,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),a=c.auth.token){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(a),t.prev=5,t.next=8,i.a.get("/users/current");case 8:return o=t.sent,u=o.data,t.abrupt("return",u);case 13:return t.prev=13,t.t0=t.catch(5),alert("Oops... Something went wrong: ".concat(t.t0)),t.abrupt("return",n.rejectWithValue(t.t0.message));case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},O={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getFetching:function(t){return t.auth.isFetching}},h=n(2),g=Object(u.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetching:!1},extraReducers:(s={},Object(h.a)(s,f.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(h.a)(s,f.register.rejected,(function(t,e){return e.payload})),Object(h.a)(s,f.register.pending,(function(){return null})),Object(h.a)(s,f.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(h.a)(s,f.logIn.rejected,(function(t,e){return e.payload})),Object(h.a)(s,f.logIn.pending,(function(){return null})),Object(h.a)(s,f.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(h.a)(s,f.logOut.rejected,(function(t,e){return e.payload})),Object(h.a)(s,f.logOut.pending,(function(){return null})),Object(h.a)(s,f.fetchCurrentUser.pending,(function(t,e){t.user=e.payload,t.isFetching=!0})),Object(h.a)(s,f.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetching=!1})),Object(h.a)(s,f.fetchCurrentUser.rejected,(function(t,e){t.user=e.payload,t.isFetching=!1})),s)}).reducer}},[[106,5,6]]]);
//# sourceMappingURL=main.0536d34a.chunk.js.map