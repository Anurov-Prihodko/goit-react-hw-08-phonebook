(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{101:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(24),o=n.n(a),i=n(17),u=n(7),s=n(43),l=(n(55),n(6)),d=n(8),b=n(1),j={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},f=function(){var t=Object(u.c)(d.c.getIsLoggedIn);return Object(b.jsxs)("nav",{children:[Object(b.jsx)(i.b,{to:"/",exact:!0,style:j.link,activeStyle:j.activeLink,children:"Main"}),t?Object(b.jsx)(i.b,{to:"/contacts",exact:!0,style:j.link,activeStyle:j.activeLink,children:"Phonebook"}):null]})},h=n.p+"static/media/default-avatar.dca40665.png",O={container:{display:"flex",alignItems:"center"},avatar:{marginRight:7},name:{fontWeight:700,marginRight:12}};function g(){var t=Object(u.b)(),e=Object(u.c)(d.c.getUsername);return Object(b.jsxs)("div",{style:O.container,children:[Object(b.jsx)("img",{src:h,alt:"",width:"32",style:O.avatar}),Object(b.jsxs)("span",{style:O.name,children:["Welcome, ",e]}),Object(b.jsx)("button",{type:"button",onClick:function(){return t(d.a.logOut())},children:"Log out"})]})}var p={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function v(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(i.b,{to:"/register",exact:!0,style:p.link,activeStyle:p.activeLink,children:"Signup"}),Object(b.jsx)(i.b,{to:"/login",exact:!0,style:p.link,activeStyle:p.activeLink,children:"Login"})]})}var x={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function m(){var t=Object(u.c)(d.c.getIsLoggedIn);return Object(b.jsxs)("header",{style:x.header,children:[Object(b.jsx)(f,{}),t?Object(b.jsx)(g,{}):Object(b.jsx)(v,{})]})}var k=n(20),y=n(27),w=["children","redirectTo"];function C(t){var e=t.children,n=t.redirectTo,c=void 0===n?"/":n,r=Object(y.a)(t,w),a=Object(u.c)(d.c.getIsLoggedIn);return Object(b.jsx)(l.b,Object(k.a)(Object(k.a)({},r),{},{children:a?e:Object(b.jsx)(l.a,{to:c})}))}var L=["children","restricted","redirectTo"];function I(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=t.redirectTo,a=void 0===r?"/":r,o=Object(y.a)(t,L),i=Object(u.c)(d.c.getIsLoggedIn)&&c;return Object(b.jsx)(l.b,Object(k.a)(Object(k.a)({},o),{},{children:i?Object(b.jsx)(l.a,{to:a}):e}))}var S=n(42),F=n(46),A=n.n(F);function E(t){var e=t.children;return Object(b.jsx)("div",{className:A.a.container,children:e})}var R=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,111))})),T=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,108))})),U=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,109))})),z=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,110))}));function B(){var t=Object(u.b)(),e=Object(u.c)(d.c.getFetching);return Object(c.useEffect)((function(){t(d.a.fetchCurrentUser())}),[t]),!e&&Object(b.jsxs)(E,{children:[Object(b.jsx)(m,{}),Object(b.jsx)(l.d,{children:Object(b.jsxs)(c.Suspense,{fallback:Object(b.jsx)(S.a,{}),children:[Object(b.jsx)(I,{exact:!0,path:"/",children:Object(b.jsx)(T,{})}),Object(b.jsx)(I,{exact:!0,path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(b.jsx)(U,{})}),Object(b.jsx)(I,{exact:!0,path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(b.jsx)(z,{})}),Object(b.jsx)(C,{path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(R,{})})]})})]})}var W=n(23),q=n(2),_=n(18),D=n(47),J=n.n(D),M=n(32),N=Object(W.a)(Object(q.f)({serializableCheck:{ignoredActions:[_.a,_.f,_.b,_.c,_.d,_.e]}})),P={key:"auth",storage:J.a,whitelist:["token"]},V=Object(q.a)({reducer:{auth:Object(_.g)(P,d.b),contacts:M.c},middleware:N,devTools:!1}),G=Object(_.h)(V);n(100);o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(u.a,{store:V,children:Object(b.jsx)(s.a,{loading:null,persistor:G,children:Object(b.jsx)(i.a,{children:Object(b.jsx)(B,{})})})})}),document.getElementById("root"))},32:function(t,e,n){"use strict";n.d(e,"i",(function(){return i})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"a",(function(){return R})),n.d(e,"d",(function(){return T})),n.d(e,"k",(function(){return U})),n.d(e,"e",(function(){return E})),n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return J}));var c,r,a=n(26),o=function(t){return t.contacts.note},i=function(t){return t.contacts.loading},u=function(t){return t.contacts.note.length},s=Object(a.a)([o],(function(t){return t.reduce((function(t,e){return e.completed?t+1:t}),0)})),l=function(t){return t.contacts.filter},d=Object(a.a)([o,l],(function(t,e){var n=e.toLowerCase().trim();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))})),b=n(16),j=n.n(b),f=n(19),h=n(15),O=n.n(h),g=n(2),p=Object(g.b)("contacts/fetchContactsRequest"),v=Object(g.b)("contacts/fetchContactsSuccess"),x=Object(g.b)("contacts/fetchContactsError"),m=Object(g.b)("contacts/addContactRequest"),k=Object(g.b)("contacts/addContactSuccess"),y=Object(g.b)("contacts/addContactError"),w=Object(g.b)("contacts/deleteContactRequest"),C=Object(g.b)("contacts/deleteContactSuccess"),L=Object(g.b)("contacts/deleteContactError"),I=Object(g.b)("contacts/toggleCompletedRequest"),S=Object(g.b)("contacts/toggleCompletedSuccess"),F=Object(g.b)("contacts/toggleCompletedError"),A=Object(g.b)("phonebook/changeFilter"),E=function(){return function(){var t=Object(f.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(p()),t.prev=1,t.next=4,O.a.get("/contacts");case 4:n=t.sent,c=n.data,e(v(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(x(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},R=function(t,e){return function(n){var c={name:t,number:e,completed:!1};n(m()),O.a.post("/contacts",c).then((function(t){var e=t.data;return n(k(e))})).catch((function(t){return n(y(t))}))}},T=function(t){return function(e){e(w()),O.a.delete("/contacts/".concat(t)).then((function(){return e(C(t))})).catch((function(t){return e(L(t))}))}},U=function(t){var e=t.id,n=t.completed;return function(t){var c={completed:n};t(I()),O.a.patch("/contacts/".concat(e),c).then((function(e){var n=e.data;return t(S(n))})).catch((function(e){return t(F(e))}))}},z=n(4),B=n(23),W=n(9),q=Object(g.d)([],(c={},Object(z.a)(c,v,(function(t,e){return e.payload})),Object(z.a)(c,k,(function(t,e){var n=e.payload;return t.find((function(t){return t.name===n.name}))?(alert("".concat(n.name," is already in contacts.")),Object(B.a)(t)):[].concat(Object(B.a)(t),[n])})),Object(z.a)(c,C,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(z.a)(c,S,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),c)),_=Object(g.d)("",Object(z.a)({},A,(function(t,e){return e.payload}))),D=Object(g.d)(!1,(r={},Object(z.a)(r,p,(function(){return!0})),Object(z.a)(r,v,(function(){return!1})),Object(z.a)(r,x,(function(){return!1})),Object(z.a)(r,m,(function(){return!0})),Object(z.a)(r,k,(function(){return!1})),Object(z.a)(r,y,(function(){return!1})),Object(z.a)(r,w,(function(){return!0})),Object(z.a)(r,C,(function(){return!1})),Object(z.a)(r,L,(function(){return!1})),Object(z.a)(r,I,(function(){return!0})),Object(z.a)(r,S,(function(){return!1})),Object(z.a)(r,F,(function(){return!1})),r)),J=Object(W.b)({note:q,filter:_,loading:D})},42:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(45),r=n.n(c),a=(n(97),n(1));function o(){return Object(a.jsx)("div",{className:"spinner",children:Object(a.jsx)(r.a,{type:"Audio",color:"#ffed4f",height:60,width:60})})}},46:function(t,e,n){t.exports={container:"Container_container__3i19u"}},55:function(t,e,n){},8:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return g}));var c=n(16),r=n.n(c),a=n(19),o=n(15),i=n.n(o),u=n(2);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var s,l=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){i.a.defaults.headers.common.Authorization=""},b=Object(u.c)("auth/register",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,l(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),alert("Oops... Something went wrong: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(u.c)("auth/login",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,l(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),alert("Oops... Something went wrong: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),f={register:b,logOut:Object(u.c)("auth/logout",Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/logout");case 3:d(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),alert("Oops... Something went wrong: ".concat(t.t0));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),logIn:j,fetchCurrentUser:Object(u.c)("auth/refresh",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,o,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),a=c.auth.token){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(a),t.prev=5,t.next=8,i.a.get("/users/current");case 8:return o=t.sent,u=o.data,t.abrupt("return",u);case 13:t.prev=13,t.t0=t.catch(5),alert("Oops... Something went wrong: ".concat(t.t0));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},h={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getFetching:function(t){return t.auth.isFetching}},O=n(4),g=Object(u.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetching:!1},extraReducers:(s={},Object(O.a)(s,f.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(O.a)(s,f.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(O.a)(s,f.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(O.a)(s,f.fetchCurrentUser.pending,(function(t,e){t.isFetching=!0})),Object(O.a)(s,f.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetching=!1})),Object(O.a)(s,f.fetchCurrentUser.rejected,(function(t,e){t.isFetching=!1})),s)}).reducer}},[[101,5,6]]]);
//# sourceMappingURL=main.0f2f72ad.chunk.js.map